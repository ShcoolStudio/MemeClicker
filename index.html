<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#4CAF50">
    <title>Meme Clicker - –ò–≥—Ä–∞-–∫–ª–∏–∫–µ—Ä —Å –º–µ–º–∞–º–∏</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="shortcut icon" href="favicon.svg">
    <link rel="apple-touch-icon" href="favicon.svg">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="mainScreen" class="main-screen">
        <div class="main-screen-content">
            <!-- –õ–æ–≥–æ—Ç–∏–ø –∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <div class="main-header">
                <div class="game-logo">üí∞</div>
                <h1 class="main-title">Meme Clicker</h1>
                <p class="main-subtitle">–ò–≥—Ä–∞-–∫–ª–∏–∫–µ—Ä —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ –º–µ–º–∞–º–∏!</p>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∏ -->
            <div class="main-buttons">
                <button id="playButton" class="play-button">
                    <span class="play-icon">üéÆ</span>
                    <span class="play-text">–ò–≥—Ä–∞—Ç—å</span>
                </button>
                
                <div class="secondary-buttons">
                    <button id="settingsButton" class="settings-button">
                        <span class="settings-icon">‚öôÔ∏è</span>
                        <span class="settings-text">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                    </button>
                </div>
            </div>
            
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–≥—Ä–µ -->
            <div class="game-info">
                <div class="info-item">
                    <span class="info-icon">üê∏</span>
                    <span class="info-text">–ö–ª–∏–∫–∞–π—Ç–µ –ø–æ –º–µ–º–∞–º</span>
                </div>
                <div class="info-item">
                    <span class="info-icon">üè™</span>
                    <span class="info-text">–ü–æ–∫—É–ø–∞–π—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π</span>
                </div>
                <div class="info-item">
                    <span class="info-icon">üéØ</span>
                    <span class="info-text">–ò–≥—Ä–∞–π—Ç–µ –≤ –º–∏–Ω–∏-–∏–≥—Ä—ã</span>
                </div>
            </div>
        </div>
        
        <!-- –§–æ–Ω–æ–≤—ã–µ –º–µ–º—ã –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ -->
        <div class="main-screen-memes">
            <div class="floating-meme">üê∏</div>
            <div class="floating-meme">üêï</div>
            <div class="floating-meme">üí™</div>
            <div class="floating-meme">üò¢</div>
            <div class="floating-meme">ü¶ç</div>
            <div class="floating-meme">üöÄ</div>
        </div>
    </div>
    
    <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
    <div id="gameScreen" class="game-container" style="display: none;">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <header class="game-header">
            <div class="game-header-top">
                <button id="backButton" class="back-button">
                    <span class="back-icon">‚Üê</span>
                    <span class="back-text">–ù–∞–∑–∞–¥</span>
                </button>
                <h1 class="game-title">üí∞ Meme Clicker</h1>
            </div>
            <div class="stats">
                <div class="money-counter">
                    <span class="money-label">–ú–æ–Ω–µ—Ç—ã:</span>
                    <span id="money" class="money-amount">0</span>
                </div>
                <div class="income-counter">
                    <span class="income-label">–î–æ—Ö–æ–¥/—Å–µ–∫:</span>
                    <span id="income" class="income-amount">0</span>
                </div>
            </div>
        </header>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–≥—Ä–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å -->
        <main class="game-main">
            <!-- –ì–ª–∞–≤–Ω—ã–π –º–µ–º –¥–ª—è –∫–ª–∏–∫–æ–≤ -->
            <div class="main-meme-container">
                <button id="mainMeme" class="main-meme">
                    <div class="meme-emoji">üê∏</div>
                    <div class="meme-name">Pepe</div>
                    <div class="click-power">+1 –º–æ–Ω–µ—Ç–∞</div>
                </button>
                <div class="click-effects" id="clickEffects"></div>
            </div>

            <!-- –ú–∞–≥–∞–∑–∏–Ω –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π -->
            <section class="shop">
                <h2>üè™ –ú–∞–≥–∞–∑–∏–Ω –º–µ–º–æ–≤</h2>
                <div class="shop-grid" id="shopGrid">
                    <!-- –ü–µ—Ä—Å–æ–Ω–∞–∂–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </div>
            </section>

            <!-- –£–ª—É—á—à–µ–Ω–∏—è -->
            <section class="upgrades">
                <h2>‚ö° –£–ª—É—á—à–µ–Ω–∏—è</h2>
                <div class="upgrades-grid" id="upgradesGrid">
                    <!-- –£–ª—É—á—à–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </div>
            </section>

            <!-- –ú–∏–Ω–∏-–∏–≥—Ä—ã -->
            <section class="minigames">
                <h2>üéÆ –ú–∏–Ω–∏-–∏–≥—Ä—ã</h2>
                <div class="minigames-grid">
                    <button id="memePuzzleBtn" class="minigame-btn" onclick="console.log('Button clicked directly!')">
                        <span class="minigame-emoji">üß©</span>
                        <span class="minigame-name">–ú–µ–º-–ø–∞–∑–ª</span>
                        <span class="minigame-cost">2500 –º–æ–Ω–µ—Ç</span>
                        <span class="minigame-description">–°–ª–æ–∂–Ω—ã–π –ø–∞–∑–ª 4x4 –∑–∞ 60 —Å–µ–∫—É–Ω–¥!</span>
                    </button>
                    <button id="memeranBtn" class="minigame-btn">
                        <span class="minigame-emoji">üéØ</span>
                        <span class="minigame-name">–ú–µ–º–µ –ö–≤–∏–∑</span>
                        <span class="minigame-cost">1500 –º–æ–Ω–µ—Ç</span>
                        <span class="minigame-description">–£–≥–∞–¥–∞–π –º–µ–º –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é!</span>
                    </button>
                </div>
            </section>
        </main>

        <!-- –ö—É–ø–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ (—Ñ–æ–Ω) -->
        <div class="background-memes" id="backgroundMemes"></div>

        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
        <div class="notifications" id="notifications"></div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –º–µ–º-–ø–∞–∑–ª–∞ -->
        <div id="puzzleModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üß© –ú–µ–º-–ø–∞–∑–ª</h2>
                    <button class="close-btn" id="closePuzzle">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="puzzle-info">
                        <div class="puzzle-timer">
                            <span>‚è±Ô∏è –í—Ä–µ–º—è:</span>
                            <span id="puzzleTimer">60</span>
                        </div>
                        <div class="puzzle-score">
                            <span>üéØ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:</span>
                            <span id="puzzleScore">0/16</span>
                        </div>
                    </div>
                    <div class="puzzle-container">
                        <div class="puzzle-grid" id="puzzleGrid">
                            <!-- –ü–∞–∑–ª –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω —á–µ—Ä–µ–∑ JavaScript -->
                        </div>
                    </div>
                    <div class="puzzle-result" id="puzzleResult" style="display: none;">
                        <h3 id="puzzleResultText"></h3>
                        <p id="puzzleResultReward"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ú–µ–º–µ—Ä–∞–Ω -->
        <div id="memeranModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üéØ –ú–µ–º–µ –ö–≤–∏–∑</h2>
                    <button class="close-btn" id="closeMemeran">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="memeran-info">
                        <div class="memeran-timer">
                            <span>‚è±Ô∏è –í—Ä–µ–º—è:</span>
                            <span id="memeranTimer">60</span>
                        </div>
                        <div class="memeran-score">
                            <span>üéØ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:</span>
                            <span id="memeranScore">0/10</span>
                        </div>
                        <div class="memeran-streak">
                            <span>üî• –°–µ—Ä–∏—è:</span>
                            <span id="memeranStreak">0</span>
                        </div>
                    </div>
                    <div class="memeran-container">
                        <div class="memeran-question" id="memeranQuestion">
                            <!-- –í–æ–ø—Ä–æ—Å –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω —á–µ—Ä–µ–∑ JavaScript -->
                        </div>
                        <div class="memeran-options" id="memeranOptions">
                            <!-- –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                        </div>
                    </div>
                    <div class="memeran-result" id="memeranResult" style="display: none;">
                        <h3 id="memeranResultText"></h3>
                        <p id="memeranResultReward"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="localization.js"></script>
    <script src="game.js"></script>
    <script src="yandex-games.js"></script>
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –Ø–Ω–¥–µ–∫—Å.–ò–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', async () => {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é
            window.localization.updatePageLanguage();
            
            // –î–æ–±–∞–≤–ª—è–µ–º –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–∞
            const languageSwitcher = window.localization.createLanguageSwitcher();
            document.body.appendChild(languageSwitcher);
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –Ø–Ω–¥–µ–∫—Å.–ò–≥—Ä–∞–º–∏
            await window.yandexGamesIntegration.init();
            
            // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–ª–∞–≤–Ω—ã–º —ç–∫—Ä–∞–Ω–æ–º
            const mainScreen = document.getElementById('mainScreen');
            const gameScreen = document.getElementById('gameScreen');
            const playButton = document.getElementById('playButton');
            const backButton = document.getElementById('backButton');
            const settingsButton = document.getElementById('settingsButton');
            
            // –ö–Ω–æ–ø–∫–∞ "–ò–≥—Ä–∞—Ç—å"
            playButton.addEventListener('click', () => {
                mainScreen.style.display = 'none';
                gameScreen.style.display = 'block';
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∏–≥—Ä—É —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
                if (!window.game) {
                    window.game = new MemeClickerGame();
                }
            });
            
            // –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"
            backButton.addEventListener('click', () => {
                gameScreen.style.display = 'none';
                mainScreen.style.display = 'flex';
            });
            
            // –ö–Ω–æ–ø–∫–∞ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" (–ø–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —è–∑—ã–∫)
            settingsButton.addEventListener('click', () => {
                const currentLang = window.localization.currentLanguage;
                const newLang = currentLang === 'ru' ? 'en' : 'ru';
                window.localization.setLanguage(newLang);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É –≤ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ
                const langButtons = document.querySelectorAll('.lang-btn');
                langButtons.forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.dataset.lang === newLang) {
                        btn.classList.add('active');
                    }
                });
            });
        });
        
        // –ü—Ä–æ—Å—Ç–∞—è —Ç–µ—Å—Ç–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
        function testPuzzle() {
            console.log('Test function called!');
            const btn = document.getElementById('memePuzzleBtn');
            if (btn) {
                console.log('Button found, clicking...');
                btn.click();
            } else {
                console.log('Button not found!');
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
        setTimeout(() => {
            console.log('Checking puzzle button...');
            const btn = document.getElementById('memePuzzleBtn');
            console.log('Button exists:', !!btn);
            if (btn) {
                console.log('Button style:', window.getComputedStyle(btn).display);
            }
        }, 3000);
    </script>
</body>
</html>
